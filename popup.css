@import url("https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&display=swap");

:root {
  --bg: #0f0f11;
  --surface: #18181c;
  --surface2: #222228;
  --border: #2a2a32;
  --accent: #c69214;
  --accent-glow: rgba(198, 146, 20, 0.1);
  --accent-light: #d4a83a;
  --green: #4ade80;
  --cp-green: #154734;
  --text: #f0f0f4;
  --muted: #7e7e98;
  --radius: 12px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: "DM Sans", sans-serif;
  background: var(--bg);
  color: var(--text);
  width: 380px;
  height: 560px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 18px 14px;
  border-bottom: 1px solid var(--border);
  border-top: 2px solid var(--cp-green);
}
.logo { display: flex; align-items: center; gap: 8px; }
.logo-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
.logo-text { font-size: 15px; font-weight: 600; letter-spacing: -0.3px; }
.logo-text span { color: #3a9b6f; }
.header-actions { display: flex; gap: 6px; }
.icon-btn {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--muted);
  cursor: pointer;
}
.icon-btn:hover { background: var(--surface2); color: var(--text); }

.screen { display: none; }
.screen.active {
  display: block;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  animation: fadeUp 0.2s ease;
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

.idle-body { padding: 14px 20px 10px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
.capture-btn {
  width: 100%;
  padding: 14px;
  border-radius: var(--radius);
  background: var(--cp-green);
  color: #f0f0f4;
  border: none;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
}
.capture-btn:hover { background: #1a5c42; }
.hint { font-size: 12px; color: var(--muted); text-align: center; line-height: 1.5; }


.divider { width: 100%; height: 1px; background: var(--border); margin: 4px 0; }
.saved-header { display: flex; justify-content: space-between; padding: 0 20px; margin-bottom: 8px; }
.saved-header span { font-size: 11px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.8px; color: var(--muted); }
.saved-list { padding: 0 20px 20px; display: flex; flex-direction: column; gap: 6px; max-height: 170px; overflow: auto; }
.saved-item { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; display: flex; align-items: center; gap: 10px; }
.saved-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); }
.saved-info { flex: 1; min-width: 0; }
.saved-title { font-size: 13px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.saved-date { font-size: 11px; color: var(--muted); margin-top: 1px; }
.saved-export { font-size: 11px; color: var(--muted); background: none; border: none; cursor: pointer; }
.saved-delete { font-size: 11px; color: #f87171; background: none; border: none; cursor: pointer; }
.empty-state { font-size: 12px; color: var(--muted); }

.loading-body { padding: 48px 20px; display: flex; flex-direction: column; align-items: center; gap: 16px; }
.progress-track { width: 100%; height: 3px; background: var(--border); border-radius: 99px; overflow: hidden; }
.progress-bar { height: 100%; background: var(--accent); border-radius: 99px; animation: progress 2.5s ease forwards; }
@keyframes progress {
  0% { width: 0%; }
  40% { width: 55%; }
  80% { width: 80%; }
  100% { width: 95%; }
}
.status-steps { display: flex; flex-direction: column; gap: 8px; width: 100%; }
.step { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--muted); }
.step.done { color: var(--text); }
.step.active { color: var(--accent-light); }
.step-icon { font-size: 14px; width: 20px; text-align: center; }
.spinner {
  width: 14px;
  height: 14px;
  border: 2px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Camera flash animation */
@keyframes flashPop {
  0% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 0 #fff); }
  15% { transform: scale(1.5); filter: brightness(3) drop-shadow(0 0 8px #fff); }
  35% { transform: scale(0.9); filter: brightness(1.2) drop-shadow(0 0 2px #fff); }
  55% { transform: scale(1.2); filter: brightness(1.8) drop-shadow(0 0 4px #c69214); }
  75% { transform: scale(1); filter: brightness(1); }
  100% { transform: scale(1); filter: brightness(1); }
}

#btn-camera.flashing {
  animation: flashPop 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97) forwards;
  display: inline-block;
}

.result-body { padding: 16px 18px 20px; }
.event-badge { display: inline-flex; align-items: center; gap: 6px; background: rgba(74, 222, 128, 0.12); color: var(--green); font-size: 11px; padding: 4px 10px; border-radius: 99px; margin-bottom: 14px; }
.event-badge::before { content: "‚óè"; font-size: 8px; }
.form-grid { display: flex; flex-direction: column; gap: 8px; }
.field-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.field { display: flex; flex-direction: column; gap: 4px; }
.field label { font-size: 10px; text-transform: uppercase; color: var(--muted); }
.field input {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 12px;
  padding: 8px 10px;
}
.actions { display: flex; gap: 8px; margin-top: 14px; }
.btn-primary { flex: 1; padding: 11px; background: var(--accent); color: #fff; border: none; border-radius: 10px; cursor: pointer; }
.btn-secondary { flex: 1; padding: 11px; background: transparent; color: var(--text); border: 1px solid var(--border); border-radius: 10px; cursor: pointer; }

.no-event-body { padding: 48px 20px; display: flex; flex-direction: column; align-items: center; gap: 12px; text-align: center; }
.no-event-icon { font-size: 36px; opacity: 0.4; }
.no-event-title { font-size: 16px; font-weight: 600; }
.no-event-sub { font-size: 13px; color: var(--muted); line-height: 1.5; }

.google-btn {
  padding: 6px 11px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
}
.google-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.user-avatar {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: #fff;
  font-weight: 700;
}
.user-avatar.visible { display: flex; }
.greeting { display: none; padding: 14px 20px 0; }
.greeting.visible { display: block; }
.greeting p { font-size: 17px; font-weight: 600; color: var(--text); }
.greeting p span { color: var(--accent-light); }

.auth-footer {
  border-top: 1px solid var(--border);
  padding: 10px 12px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--bg);
}
.auth-status {
  flex: 1;
  font-size: 11px;
  line-height: 1.4;
  color: var(--muted);
}
.auth-btn {
  min-width: 136px;
  text-align: center;
}

.toast {
  position: fixed;
  bottom: 66px;
  left: 50%;
  transform: translateX(-50%) translateY(calc(100% + 24px));
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  background: var(--green);
  color: #0a1a0f;
  font-size: 13px;
  text-align: center;
  font-weight: 600;
  padding: 8px 16px;
  border-radius: 99px;
  transition: transform 0.3s ease, opacity 0.3s ease, visibility 0s linear 0.3s;
}
.toast.show {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition-delay: 0s;
}

body.light {
  --bg: #f5f5f7;
  --surface: #ffffff;
  --surface2: #ebebef;
  --border: #d8d8e0;
  --text: #111114;
  --muted: #888899;
}
